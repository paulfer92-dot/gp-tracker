<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>OSRS Hub V55</title>
    <style>
        @import url('https://fonts.cdnfonts.com/css/runescape-uf');
        :root { --osrs-orange: #ff981f; --osrs-yellow: #ffff00; --bg: #1a1712; }
        
        * { box-sizing: border-box; touch-action: manipulation; }
        
        body { 
            margin: 0; background: #000; color: #fff; 
            font-family: 'RuneScape UF', sans-serif; 
            height: 100dvh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* HEADER & INPUT */
        header { background: #222; padding: 10px; border-bottom: 2px solid var(--osrs-orange); z-index: 10; }
        .input-row { display: flex; gap: 8px; }
        input { flex: 1; padding: 12px; background: #000; color: #0f0; border: 1px solid #666; font-size: 16px; border-radius: 4px; }
        .add-btn { background: #006400; color: #fff; border: none; padding: 0 15px; border-radius: 4px; font-family: 'RuneScape UF'; }

        /* GAME AREA */
        main { flex: 1; display: flex; flex-direction: column; background: var(--bg); overflow-y: auto; padding: 10px; }

        /* EQUIPMENT SCREEN (Mini) */
        .equip-area {
            background: url('https://oldschool.runescape.wiki/images/Equipment_window.png') no-repeat center;
            background-size: contain; height: 180px; width: 100%; position: relative; margin-bottom: 10px;
        }
        .equip-slot {
            position: absolute; width: 34px; height: 34px; background: rgba(0,0,0,0.4);
            border: 1px solid #3e3529; display: flex; align-items: center; justify-content: center;
        }

        /* INVENTORY GRID */
        .inv-section { background: #4e4435; border: 3px solid #3e3529; padding: 8px; width: 260px; margin: 0 auto; }
        .inv-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; }
        .slot { aspect-ratio: 1; background: rgba(0,0,0,0.5); border: 1px solid #3e3529; display: flex; align-items: center; justify-content: center; }
        .item-img { width: 85%; height: 85%; object-fit: contain; }

        .chat-log { background: #000; border: 1px solid #3e3529; height: 80px; margin-top: 10px; overflow-y: auto; padding: 5px; font-size: 13px; color: #0f0; font-family: monospace; }
        
        .footer-nav { display: flex; justify-content: space-around; padding: 10px; background: #111; border-top: 1px solid var(--osrs-orange); }
        .reset-btn { color: red; background: none; border: 1px solid red; padding: 5px 10px; font-size: 12px; }
    </style>
</head>
<body>

<header>
    <div class="input-row">
        <input type="number" id="gold-val" placeholder="Deposit $">
        <button class="add-btn" onclick="deposit()">ADD</button>
    </div>
    <div style="font-size:14px; color:var(--osrs-yellow); margin-top:5px; text-align:center;">
        Next Armor Unlock: $<span id="cost-display">20</span>
    </div>
</header>

<main>
    <div class="equip-area" id="equip-screen">
        <div class="equip-slot" style="top: 10%; left: 45%;" id="slot-head"></div>
        <div class="equip-slot" style="top: 32%; left: 45%;" id="slot-body"></div>
        <div class="equip-slot" style="top: 54%; left: 45%;" id="slot-legs"></div>
        <div class="equip-slot" style="top: 32%; left: 28%;" id="slot-weapon"></div>
        <div class="equip-slot" style="top: 32%; left: 62%;" id="slot-shield"></div>
    </div>

    <div class="inv-section">
        <div class="inv-grid" id="inv-grid"></div>
    </div>

    <div class="chat-log" id="log">System: V55 All-In-One Rebuild Online.</div>
</main>

<footer class="footer-nav">
    <button class="reset-btn" onclick="wipe()">RESET ALL</button>
    <div style="font-size:12px; color:#888;">iPhone Air Compatibility Mode</div>
</footer>

<script>
    let d = { a:0, w:0, ai:0, wi:0, inv:[] };

    const ARMOR = [
        { n: 'Rune Helm', u: 'https://oldschool.runescape.wiki/images/Rune_full_helm.png', s: 'head' },
        { n: 'Rune Platebody', u: 'https://oldschool.runescape.wiki/images/Rune_platebody.png', s: 'body' },
        { n: 'Rune Kiteshield', u: 'https://oldschool.runescape.wiki/images/Rune_kiteshield.png', s: 'shield' },
        { n: 'Rune Platelegs', u: 'https://oldschool.runescape.wiki/images/Rune_platelegs.png', s: 'legs' }
    ];

    const WEPS = [
        { n: 'Rune Scimitar', u: 'https://oldschool.runescape.wiki/images/Rune_scimitar.png', s: 'weapon' },
        { n: 'Dragon Scimitar', u: 'https://oldschool.runescape.wiki/images/Dragon_scimitar.png', s: 'weapon' }
    ];

    function getCost() { return d.ai < 4 ? 20 : d.ai < 8 ? 40 : 70; }

    function deposit() {
        let v = parseInt(document.getElementById('gold-val').value) || 0;
        if (v <= 0) return;
        d.a += v; d.w += v;

        let ac = getCost();
        while (d.ai < ARMOR.length && d.a >= ac) {
            let item = ARMOR[d.ai];
            d.inv.push(item);
            msg(`Unlocked: ${item.n}`);
            // Auto-equip logic
            document.getElementById('slot-' + item.s).innerHTML = `<img src="${item.u}" style="width:100%">`;
            d.a -= ac; d.ai++; ac = getCost();
        }

        while (d.wi < WEPS.length && d.w >= 25) {
            let item = WEPS[d.wi];
            d.inv.push(item);
            msg(`Unlocked: ${item.n}`);
            document.getElementById('slot-weapon').innerHTML = `<img src="${item.u}" style="width:100%">`;
            d.w -= 25; d.wi++;
        }

        document.getElementById('gold-val').value = '';
        save(); draw();
    }

    function draw() {
        document.getElementById('cost-display').innerText = getCost();
        const g = document.getElementById('inv-grid');
        g.innerHTML = '';
        for(let i=0; i<28; i++) {
            const s = document.createElement('div'); s.className = 'slot';
            if(d.inv[i]) s.innerHTML = `<img src="${d.inv[i].u}" class="item-img">`;
            g.appendChild(s);
        }
    }

    function msg(m) {
        const l = document.getElementById('log');
        l.innerHTML = `<div>> ${m}</div>` + l.innerHTML;
    }

    function save() { localStorage.setItem('OSRS_V55', JSON.stringify(d)); }
    function load() { 
        const s = localStorage.getItem('OSRS_V55'); 
        if(s) d = JSON.parse(s); 
    }
    function wipe() { localStorage.removeItem('OSRS_V55'); location.reload(); }

    load(); draw();
</script>
</body>
</html>
